# Supertrend & Bollinger Bands 策略说明

## 1. 策略概述

这是一个结合了 Supertrend 和布林带的交易策略，通过两个技术指标的协同作用来识别交易机会。策略的核心思想是利用 Supertrend 指标捕捉趋势方向，同时使用布林带来确认价格的超买超卖状态。

## 2. 技术指标说明

### 2.1 Supertrend 指标
- **定义**：趋势跟踪指标，基于 ATR（平均真实波幅）计算
- **计算方法**：
  ```
  基本价格 = (最高价 + 最低价) / 2
  上轨 = 基本价格 + (Factor × ATR)
  下轨 = 基本价格 - (Factor × ATR)
  ```
- **参数设置**：
  - ATR周期：10
  - 乘数因子：3

### 2.2 布林带指标
- **定义**：反映价格波动性的统计指标
- **计算方法**：
  ```
  中轨 = N周期简单移动平均线(SMA)
  上轨 = 中轨 + K × 标准差
  下轨 = 中轨 - K × 标准差
  ```
- **参数设置**：
  - 周期：20
  - 标准差倍数：2

## 3. 交易规则

### 3.1 入场条件
1. **多头入场**：
   - 价格突破 Supertrend 上轨
   - 同时价格低于布林带下轨
   - 表明趋势向上且价格超卖

2. **空头入场**：
   - 价格跌破 Supertrend 下轨
   - 同时价格高于布林带上轨
   - 表明趋势向下且价格超买

### 3.2 出场条件
1. **多头出场**：
   - 价格跌破 Supertrend 下轨
   - 不考虑布林带位置

2. **空头出场**：
   - 价格突破 Supertrend 上轨
   - 不考虑布林带位置

### 3.3 头寸管理
- 单笔交易风险不超过账户的2%
- 头寸规模计算：
  ```
  头寸规模 = (账户总值 × 风险比例) / 当前价格
  ```

## 4. 风险管理

### 4.1 入场风险控制
- 使用布林带确认超买超卖
- 要求趋势和价格位置双重确认
- 避免在高波动期间频繁交易

### 4.2 持仓风险控制
- 固定比例风险管理
- 使用 Supertrend 作为移动止损
- 账户风险敞口限制

## 5. 策略优势

1. **趋势跟踪**：
   - 利用 Supertrend 捕捉主要趋势
   - 避免在震荡市场频繁交易

2. **波动率适应**：
   - 布林带自动适应市场波动
   - ATR 考虑市场波动性

3. **风险控制**：
   - 明确的入场和出场规则
   - 系统化的头寸管理
   - 自动止损机制

## 6. 策略局限

1. **滞后性**：
   - 技术指标都有一定滞后
   - 可能错过趋势初期机会

2. **假信号**：
   - 震荡市场可能产生虚假信号
   - 需要其他指标配合过滤

3. **参数敏感**：
   - 对参数设置较为敏感
   - 需要定期优化参数

## 7. 实现注意事项

### 7.1 数据要求
- 使用5分钟K线数据
- 确保数据的连续性
- 处理好除权除息

### 7.2 计算优化
- 使用向量化运算提高效率
- 缓存中间计算结果
- 优化指标计算方法

### 7.3 回测建议
- 测试不同的参数组合
- 关注不同市场环境下的表现
- 评估交易成本的影响

## 8. 参数优化方向

1. **Supertrend 参数**：
   - ATR周期：8-12
   - 乘数因子：2.5-3.5

2. **布林带参数**：
   - 周期：15-25
   - 标准差倍数：1.8-2.2

3. **风险管理参数**：
   - 账户风险比例：1%-3%
   - 止损倍数：1.5-2.5

## 9. 性能评估指标

1. **收益指标**：
   - 年化收益率
   - 夏普比率
   - 最大回撤

2. **交易指标**：
   - 胜率
   - 盈亏比
   - 平均持仓时间

3. **风险指标**：
   - 波动率
   - 下行风险
   - 最大亏损 